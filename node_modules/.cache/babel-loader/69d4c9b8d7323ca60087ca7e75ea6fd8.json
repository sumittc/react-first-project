{"ast":null,"code":"var _jsxFileName = \"E:\\\\01 Developement\\\\ReactJs\\\\class-base-app\\\\src\\\\components\\\\News.js\";\nimport React, { Component } from \"react\";\nimport NewsItem from \"./NewsItem\";\nimport \"./globalClass\";\nimport Spinner from \"./Spinner\";\nimport PropTypes from 'prop-types';\nimport eventBus from \"../utility/EventBus\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class News extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleOnNext = () => {\n      if (this.state.page + 1 > Math.ceil(this.state.totalResults / this.props.pageSize)) {\n        return;\n      }\n\n      this.fetchNewsDataFromServer().then(LParsedata => {\n        let LArticals = LParsedata.articles;\n        LArticals = this.validateArray(LArticals);\n\n        if (LArticals.length <= 0) {\n          return;\n        }\n\n        this.setState({\n          page: this.state.page + 1,\n          articles: LArticals\n        });\n      });\n    };\n\n    this.handleOnPrevious = async () => {\n      this.fetchNewsDataFromServer().then(LParsedata => {\n        let LArticals = LParsedata.articles;\n        LArticals = this.validateArray(LArticals);\n        this.setState({\n          page: this.state.page - 1,\n          articles: LArticals\n        });\n      });\n    };\n\n    this.state = {\n      articles: [],\n      page: 1,\n      totalResults: 0,\n      loading: false\n    };\n    let category = this.props.category[0].toUpperCase() + this.props.category.slice(1);\n    document.title = `${category} - News Monkey`;\n    console.log('constructore called');\n  }\n\n  componentDidMount() {\n    eventBus.on(\"couponApply\", data => {\n      console.log('Event Listned successfully.');\n    });\n    this.fetchNewsDataFromServer().then(LParsedata => {\n      let LArticals = LParsedata.articles;\n      LArticals = this.validateArray(LArticals);\n      this.setState({\n        articles: LArticals,\n        totalResults: LParsedata.totalResults\n      });\n    });\n  }\n\n  async fetchNewsDataFromServer() {\n    let LUrl = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apiKey=3e9e7838c5544ecf80621f19694f5022\n    &page=${this.state.page + 1}&pageSize=${this.props.pageSize}`;\n    this.setState({\n      loading: true\n    });\n    let LData = await fetch(LUrl);\n    let LParsedata = await LData.json();\n    this.setState({\n      loading: false\n    });\n    return LParsedata;\n  }\n\n  validateArray(p_arrJson) {\n    let LResultArray = [];\n\n    for (let itemObject of p_arrJson) {\n      if (itemObject.title && itemObject.description && itemObject.urlToImage && itemObject.url) {\n        LResultArray.push(itemObject);\n      }\n    }\n\n    return LResultArray;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container my-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-center\",\n        children: [\"News Monkey - Top \", this.props.category[0].toUpperCase() + this.props.category.slice(1), \" Headline\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: !this.state.loading && this.state.articles.map(item => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-4\",\n            children: /*#__PURE__*/_jsxDEV(NewsItem, {\n              title: item.title ? item.title.slice(0, 40) : \"\",\n              description: item.description ? item.description.slice(0, 88) : \"\",\n              imageUrl: item.urlToImage ? item.urlToImage : \"\",\n              newsUrl: item.url ? item.url : \"\",\n              publishedAt: item.publishedAt ? item.publishedAt : \"\",\n              author: item.author ? item.author : \"\",\n              source: item.source ? item.source : \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 17\n            }, this)\n          }, item.url, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container d-flex justify-content-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          disabled: this.state.page <= 1,\n          className: \"btn btn-dark\",\n          onClick: this.handleOnPrevious,\n          children: \"\\u2190 Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          disabled: this.state.articles.length <= 0,\n          className: \"btn btn-dark\",\n          onClick: this.handleOnNext,\n          children: \"Next \\u2192\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this);\n  }\n\n}\nNews.defaultProps = {\n  pageSize: 20,\n  country: 'in',\n  category: 'business'\n};\nNews.propsType = {\n  pageSize: PropTypes.number,\n  country: PropTypes.string,\n  category: PropTypes.string\n};\nexport default News;","map":{"version":3,"names":["React","Component","NewsItem","Spinner","PropTypes","eventBus","News","constructor","props","handleOnNext","state","page","Math","ceil","totalResults","pageSize","fetchNewsDataFromServer","then","LParsedata","LArticals","articles","validateArray","length","setState","handleOnPrevious","loading","category","toUpperCase","slice","document","title","console","log","componentDidMount","on","data","LUrl","country","LData","fetch","json","p_arrJson","LResultArray","itemObject","description","urlToImage","url","push","render","map","item","publishedAt","author","source","defaultProps","propsType","number","string"],"sources":["E:/01 Developement/ReactJs/class-base-app/src/components/News.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport NewsItem from \"./NewsItem\";\r\nimport \"./globalClass\";\r\nimport Spinner from \"./Spinner\";\r\nimport PropTypes from 'prop-types';\r\nimport eventBus from \"../utility/EventBus\";\r\n\r\nexport class News extends Component {\r\n\r\n  static defaultProps = {\r\n    pageSize:20,\r\n    country:'in',\r\n    category:'business'\r\n  }\r\n\r\n  static propsType ={\r\n    pageSize:PropTypes.number,\r\n    country: PropTypes.string,\r\n    category:PropTypes.string\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      articles: [],\r\n      page: 1,\r\n      totalResults: 0,\r\n      loading: false,\r\n    };\r\n\r\n    let category = this.props.category[0].toUpperCase() + this.props.category.slice(1);\r\n    document.title = `${category} - News Monkey`;\r\n    console.log('constructore called')\r\n  }\r\n\r\n  componentDidMount() {\r\n    \r\n    eventBus.on(\"couponApply\", (data) =>{\r\n      console.log('Event Listned successfully.')\r\n    });\r\n\r\n    this.fetchNewsDataFromServer().then(LParsedata=>{\r\n\r\n      let LArticals = LParsedata.articles;\r\n      LArticals = this.validateArray(LArticals);\r\n  \r\n      this.setState({\r\n        articles: LArticals,\r\n        totalResults: LParsedata.totalResults,\r\n      });\r\n  \r\n    })\r\n  }\r\n\r\n  handleOnNext = () => {\r\n    if (\r\n      this.state.page + 1 >\r\n      Math.ceil(this.state.totalResults / this.props.pageSize)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    this.fetchNewsDataFromServer().then(LParsedata=>{\r\n\r\n      let LArticals = LParsedata.articles;\r\n      LArticals = this.validateArray(LArticals);\r\n  \r\n      if (LArticals.length <= 0) {\r\n        return;\r\n      }\r\n  \r\n      this.setState({\r\n        page: this.state.page + 1,\r\n        articles: LArticals,\r\n      });\r\n    })\r\n\r\n  };\r\n\r\n  handleOnPrevious = async () => {\r\n\r\n    this.fetchNewsDataFromServer().then(LParsedata=>{\r\n      \r\n    let LArticals = LParsedata.articles;\r\n    LArticals = this.validateArray(LArticals);\r\n\r\n    this.setState({\r\n      page: this.state.page - 1,\r\n      articles: LArticals,\r\n    });\r\n    })\r\n\r\n  };\r\n\r\n  async fetchNewsDataFromServer() {\r\n    \r\n    let LUrl = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apiKey=3e9e7838c5544ecf80621f19694f5022\r\n    &page=${this.state.page + 1}&pageSize=${this.props.pageSize}`;\r\n    \r\n    this.setState({ loading: true });\r\n    let LData = await fetch(LUrl);\r\n    let LParsedata = await LData.json();\r\n    this.setState({ loading: false });\r\n\r\n    return LParsedata;\r\n  }\r\n\r\n  validateArray(p_arrJson) {\r\n    let LResultArray = [];\r\n    for (let itemObject of p_arrJson) {\r\n      if (\r\n        itemObject.title &&\r\n        itemObject.description &&\r\n        itemObject.urlToImage &&\r\n        itemObject.url\r\n      ) {\r\n        LResultArray.push(itemObject);\r\n      }\r\n    }\r\n    return LResultArray;\r\n  }\r\n  render() {\r\n    \r\n    return (\r\n      <div className=\"container my-3\">\r\n        <h1 className=\"text-center\">News Monkey - Top {this.props.category[0].toUpperCase() + this.props.category.slice(1)} Headline</h1>\r\n        {/* {this.state.loading && <Spinner />} */}\r\n\r\n        <div className=\"row\">\r\n          { !this.state.loading && this.state.articles.map((item) => {\r\n            return (\r\n              <div className=\"col-md-4\" key={item.url}>\r\n                <NewsItem\r\n                  title={item.title ? item.title.slice(0, 40) : \"\"}\r\n                  description={ item.description ? item.description.slice(0, 88) : \"\"}\r\n                  imageUrl={item.urlToImage ? item.urlToImage : \"\"}\r\n                  newsUrl={item.url ? item.url : \"\"}\r\n                  publishedAt={item.publishedAt ? item.publishedAt : \"\"}\r\n                  author = {item.author? item.author : \"\"}\r\n                  source = {item.source? item.source : \"\"}\r\n                />\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n        <div className=\"container d-flex justify-content-between\">\r\n          <button\r\n            type=\"button\"\r\n            disabled={this.state.page <= 1}\r\n            className=\"btn btn-dark\"\r\n            onClick={this.handleOnPrevious}\r\n          >\r\n            &larr; Previous\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            disabled={this.state.articles.length <= 0}\r\n            className=\"btn btn-dark\"\r\n            onClick={this.handleOnNext}\r\n          >\r\n            Next &rarr;\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default News;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}