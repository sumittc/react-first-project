{"ast":null,"code":"var _jsxFileName = \"E:\\\\01 Developement\\\\ReactJs\\\\class-base-app\\\\src\\\\components\\\\News.js\";\nimport React, { Component } from \"react\";\nimport NewsItem from \"./NewsItem\";\nimport \"./globalClass\";\nimport Spinner from \"./Spinner\";\nimport PropTypes from \"prop-types\";\nimport eventBus from \"../utility/EventBus\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class News extends Component {\n  constructor(props) {\n    super(props);\n\n    this.fetchMoreData = () => {\n      this.setState({\n        page: this.state.page + 1\n      });\n      this.fetchNewsDataFromServer();\n    };\n\n    this.state = {\n      articles: [],\n      page: 1,\n      totalResults: 0,\n      loading: false,\n      count: 0\n    };\n    let category = this.props.category[0].toUpperCase() + this.props.category.slice(1);\n    document.title = `${category} - News Monkey`;\n    console.log(\"constructore called\");\n  }\n\n  componentDidMount() {\n    eventBus.on(\"couponApply\", data => {\n      console.log(\"Event Listned successfully.\");\n    });\n    this.fetchNewsDataFromServer();\n  }\n\n  async fetchNewsDataFromServer() {\n    let LUrl = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apiKey=3e9e7838c5544ecf80621f19694f5022\n    &page=${this.state.page + 1}&pageSize=${this.props.pageSize}`;\n    this.setState({\n      loading: true\n    });\n    let LData = await fetch(LUrl);\n    let LParsedata = await LData.json();\n    this.setState({\n      loading: false\n    });\n    let LArticals = LParsedata.articles;\n    LArticals = this.validateArray(LArticals);\n    LArticals = this.state.articles.concat(LArticals);\n    this.setState({\n      articles: LArticals,\n      totalResults: LParsedata.totalResults\n    });\n    return LParsedata;\n  }\n\n  validateArray(p_arrJson) {\n    let LResultArray = [];\n\n    for (let itemObject of p_arrJson) {\n      if (itemObject.title && itemObject.description && itemObject.urlToImage && itemObject.url) {\n        LResultArray.push(itemObject);\n      }\n    }\n\n    return LResultArray;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container my-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-center\",\n        children: [\"News Monkey - Top\", \" \", this.props.category[0].toUpperCase() + this.props.category.slice(1), \" \", \"Headline\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n        dataLength: this.state.articles.length,\n        next: this.fetchMoreData,\n        hasMore: this.state.articles.length <= this.state.totalResults,\n        loader: /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 19\n        }, this),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: this.state.articles.map(item => {\n            this.setState({\n              count: this.state.count++\n            });\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-4\",\n              children: /*#__PURE__*/_jsxDEV(NewsItem, {\n                title: item.title ? item.title.slice(0, 40) : \"\",\n                description: item.description ? item.description.slice(0, 88) : \"\",\n                imageUrl: item.urlToImage ? item.urlToImage : \"\",\n                newsUrl: item.url ? item.url : \"\",\n                publishedAt: item.publishedAt ? item.publishedAt : \"\",\n                author: item.author ? item.author : \"\",\n                source: item.source ? item.source : \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 19\n              }, this)\n            }, `${item.url}${this.state.count}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this);\n  }\n\n}\nNews.defaultProps = {\n  pageSize: 20,\n  country: \"in\",\n  category: \"business\"\n};\nNews.propsType = {\n  pageSize: PropTypes.number,\n  country: PropTypes.string,\n  category: PropTypes.string\n};\nexport default News;","map":{"version":3,"names":["React","Component","NewsItem","Spinner","PropTypes","eventBus","InfiniteScroll","News","constructor","props","fetchMoreData","setState","page","state","fetchNewsDataFromServer","articles","totalResults","loading","count","category","toUpperCase","slice","document","title","console","log","componentDidMount","on","data","LUrl","country","pageSize","LData","fetch","LParsedata","json","LArticals","validateArray","concat","p_arrJson","LResultArray","itemObject","description","urlToImage","url","push","render","length","map","item","publishedAt","author","source","defaultProps","propsType","number","string"],"sources":["E:/01 Developement/ReactJs/class-base-app/src/components/News.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport NewsItem from \"./NewsItem\";\r\nimport \"./globalClass\";\r\nimport Spinner from \"./Spinner\";\r\nimport PropTypes from \"prop-types\";\r\nimport eventBus from \"../utility/EventBus\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\n\r\nexport class News extends Component {\r\n  static defaultProps = {\r\n    pageSize: 20,\r\n    country: \"in\",\r\n    category: \"business\",\r\n  };\r\n\r\n  static propsType = {\r\n    pageSize: PropTypes.number,\r\n    country: PropTypes.string,\r\n    category: PropTypes.string,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      articles: [],\r\n      page: 1,\r\n      totalResults: 0,\r\n      loading: false,\r\n      count:0\r\n    };\r\n\r\n    let category =\r\n      this.props.category[0].toUpperCase() + this.props.category.slice(1);\r\n    document.title = `${category} - News Monkey`;\r\n    console.log(\"constructore called\");\r\n  }\r\n\r\n  componentDidMount() {\r\n    eventBus.on(\"couponApply\", (data) => {\r\n      console.log(\"Event Listned successfully.\");\r\n    });\r\n\r\n    this.fetchNewsDataFromServer();\r\n  }\r\n\r\n  async fetchNewsDataFromServer() {\r\n    let LUrl = `https://newsapi.org/v2/top-headlines?country=${\r\n      this.props.country\r\n    }&category=${this.props.category}&apiKey=3e9e7838c5544ecf80621f19694f5022\r\n    &page=${this.state.page + 1}&pageSize=${this.props.pageSize}`;\r\n\r\n    this.setState({ loading: true });\r\n    let LData = await fetch(LUrl);\r\n    let LParsedata = await LData.json();\r\n    this.setState({ loading: false });\r\n\r\n    let LArticals = LParsedata.articles;\r\n    LArticals = this.validateArray(LArticals);\r\n\r\n    LArticals = this.state.articles.concat(LArticals);\r\n    this.setState({\r\n      articles: LArticals,\r\n      totalResults: LParsedata.totalResults,\r\n    });\r\n\r\n    return LParsedata;\r\n  }\r\n\r\n  fetchMoreData = () => {\r\n    this.setState({page:this.state.page+1});\r\n    this.fetchNewsDataFromServer();\r\n\r\n  };\r\n\r\n  validateArray(p_arrJson) {\r\n    let LResultArray = [];\r\n    for (let itemObject of p_arrJson) {\r\n      if (\r\n        itemObject.title &&\r\n        itemObject.description &&\r\n        itemObject.urlToImage &&\r\n        itemObject.url\r\n      ) {\r\n        LResultArray.push(itemObject);\r\n      }\r\n    }\r\n    return LResultArray;\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"container my-3\">\r\n        <h1 className=\"text-center\">\r\n          News Monkey - Top{\" \"}\r\n          {this.props.category[0].toUpperCase() + this.props.category.slice(1)}{\" \"}\r\n          Headline\r\n        </h1>\r\n        {/* {this.state.loading && <Spinner />} */}\r\n\r\n        <InfiniteScroll\r\n          dataLength={this.state.articles.length}\r\n          next={this.fetchMoreData}\r\n          hasMore={this.state.articles.length<=this.state.totalResults}\r\n          loader={<Spinner />}\r\n        >\r\n          <div className=\"row\">\r\n            {this.state.articles.map((item) => {\r\n             this.setState( {count:this.state.count++});\r\n              return (\r\n                <div className=\"col-md-4\" key={`${item.url}${this.state.count}`}>\r\n                  <NewsItem\r\n                    title={item.title ? item.title.slice(0, 40) : \"\"}\r\n                    description={\r\n                      item.description ? item.description.slice(0, 88) : \"\"\r\n                    }\r\n                    imageUrl={item.urlToImage ? item.urlToImage : \"\"}\r\n                    newsUrl={item.url ? item.url : \"\"}\r\n                    publishedAt={item.publishedAt ? item.publishedAt : \"\"}\r\n                    author={item.author ? item.author : \"\"}\r\n                    source={item.source ? item.source : \"\"}\r\n                  />\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n        </InfiniteScroll>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default News;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}