{"ast":null,"code":"var _jsxFileName = \"E:\\\\01 Developement\\\\ReactJs\\\\class-base-app\\\\src\\\\components\\\\News.js\";\nimport React, { Component } from \"react\";\nimport NewsItem from \"./NewsItem\";\nimport \"./globalClass\";\nimport Spinner from \"./Spinner\";\nimport PropTypes from \"prop-types\";\nimport eventBus from \"../utility/EventBus\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class News extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleOnNext = () => {\n      if (this.state.page + 1 > Math.ceil(this.state.totalResults / this.props.pageSize)) {\n        return;\n      }\n\n      this.fetchNewsDataFromServer().then(LParsedata => {\n        let LArticals = LParsedata.articles;\n        LArticals = this.validateArray(LArticals);\n\n        if (LArticals.length <= 0) {\n          return;\n        }\n\n        this.setState({\n          page: this.state.page + 1,\n          articles: LArticals,\n          totalResults: LParsedata.totalResults\n        });\n      });\n    };\n\n    this.handleOnPrevious = async () => {\n      this.fetchNewsDataFromServer().then(LParsedata => {\n        let LArticals = LParsedata.articles;\n        LArticals = this.validateArray(LArticals);\n        this.setState({\n          page: this.state.page - 1,\n          articles: LArticals,\n          totalResults: LParsedata.totalResults\n        });\n      });\n    };\n\n    this.state = {\n      articles: [],\n      page: 1,\n      totalResults: 0,\n      loading: false\n    };\n    let category = this.props.category[0].toUpperCase() + this.props.category.slice(1);\n    document.title = `${category} - News Monkey`;\n    console.log(\"constructore called\");\n  }\n\n  componentDidMount() {\n    eventBus.on(\"couponApply\", data => {\n      console.log(\"Event Listned successfully.\");\n    });\n    this.fetchNewsDataFromServer().then(LParsedata => {\n      let LArticals = LParsedata.articles;\n      LArticals = this.validateArray(LArticals);\n      this.setState({\n        articles: LArticals,\n        totalResults: LParsedata.totalResults\n      });\n    });\n  }\n\n  async fetchNewsDataFromServer() {\n    let LUrl = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apiKey=3e9e7838c5544ecf80621f19694f5022\n    &page=${this.state.page + 1}&pageSize=${this.props.pageSize}`;\n    this.setState({\n      loading: true\n    });\n    let LData = await fetch(LUrl);\n    let LParsedata = await LData.json();\n    this.setState({\n      loading: false\n    });\n    return LParsedata;\n  }\n\n  validateArray(p_arrJson) {\n    let LResultArray = [];\n\n    for (let itemObject of p_arrJson) {\n      if (itemObject.title && itemObject.description && itemObject.urlToImage && itemObject.url) {\n        LResultArray.push(itemObject);\n      }\n    }\n\n    return LResultArray;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container my-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-center\",\n        children: [\"News Monkey - Top\", \" \", this.props.category[0].toUpperCase() + this.props.category.slice(1), \" \", \"Headline\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n        dataLength: this.state.articles.length,\n        next: this.fetchMoreData,\n        hasMore: this.state.articles.length <= this.state.totalResults,\n        loader: /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 19\n        }, this),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: this.state.articles.map(item => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-4\",\n              children: /*#__PURE__*/_jsxDEV(NewsItem, {\n                title: item.title ? item.title.slice(0, 40) : \"\",\n                description: item.description ? item.description.slice(0, 88) : \"\",\n                imageUrl: item.urlToImage ? item.urlToImage : \"\",\n                newsUrl: item.url ? item.url : \"\",\n                publishedAt: item.publishedAt ? item.publishedAt : \"\",\n                author: item.author ? item.author : \"\",\n                source: item.source ? item.source : \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 19\n              }, this)\n            }, item.url, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container d-flex justify-content-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          disabled: this.state.page <= 1,\n          className: \"btn btn-dark\",\n          onClick: this.handleOnPrevious,\n          children: \"\\u2190 Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          disabled: this.state.articles.length <= 0,\n          className: \"btn btn-dark\",\n          onClick: this.handleOnNext,\n          children: \"Next \\u2192\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this);\n  }\n\n}\nNews.defaultProps = {\n  pageSize: 20,\n  country: \"in\",\n  category: \"business\"\n};\nNews.propsType = {\n  pageSize: PropTypes.number,\n  country: PropTypes.string,\n  category: PropTypes.string\n};\nexport default News;","map":{"version":3,"names":["React","Component","NewsItem","Spinner","PropTypes","eventBus","InfiniteScroll","News","constructor","props","handleOnNext","state","page","Math","ceil","totalResults","pageSize","fetchNewsDataFromServer","then","LParsedata","LArticals","articles","validateArray","length","setState","handleOnPrevious","loading","category","toUpperCase","slice","document","title","console","log","componentDidMount","on","data","LUrl","country","LData","fetch","json","p_arrJson","LResultArray","itemObject","description","urlToImage","url","push","render","fetchMoreData","map","item","publishedAt","author","source","defaultProps","propsType","number","string"],"sources":["E:/01 Developement/ReactJs/class-base-app/src/components/News.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport NewsItem from \"./NewsItem\";\r\nimport \"./globalClass\";\r\nimport Spinner from \"./Spinner\";\r\nimport PropTypes from \"prop-types\";\r\nimport eventBus from \"../utility/EventBus\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\n\r\nexport class News extends Component {\r\n  static defaultProps = {\r\n    pageSize: 20,\r\n    country: \"in\",\r\n    category: \"business\",\r\n  };\r\n\r\n  static propsType = {\r\n    pageSize: PropTypes.number,\r\n    country: PropTypes.string,\r\n    category: PropTypes.string,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      articles: [],\r\n      page: 1,\r\n      totalResults: 0,\r\n      loading: false,\r\n    };\r\n\r\n    let category =\r\n      this.props.category[0].toUpperCase() + this.props.category.slice(1);\r\n    document.title = `${category} - News Monkey`;\r\n    console.log(\"constructore called\");\r\n  }\r\n\r\n  componentDidMount() {\r\n    eventBus.on(\"couponApply\", (data) => {\r\n      console.log(\"Event Listned successfully.\");\r\n    });\r\n\r\n    this.fetchNewsDataFromServer().then((LParsedata) => {\r\n      let LArticals = LParsedata.articles;\r\n      LArticals = this.validateArray(LArticals);\r\n\r\n      this.setState({\r\n        articles: LArticals,\r\n        totalResults: LParsedata.totalResults,\r\n      });\r\n    });\r\n  }\r\n\r\n  handleOnNext = () => {\r\n    if (\r\n      this.state.page + 1 >\r\n      Math.ceil(this.state.totalResults / this.props.pageSize)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    this.fetchNewsDataFromServer().then((LParsedata) => {\r\n      let LArticals = LParsedata.articles;\r\n      LArticals = this.validateArray(LArticals);\r\n\r\n      if (LArticals.length <= 0) {\r\n        return;\r\n      }\r\n\r\n      this.setState({\r\n        page: this.state.page + 1,\r\n        articles: LArticals,\r\n        totalResults: LParsedata.totalResults,\r\n      });\r\n    });\r\n  };\r\n\r\n  handleOnPrevious = async () => {\r\n    this.fetchNewsDataFromServer().then((LParsedata) => {\r\n      let LArticals = LParsedata.articles;\r\n      LArticals = this.validateArray(LArticals);\r\n\r\n      this.setState({\r\n        page: this.state.page - 1,\r\n        articles: LArticals,\r\n        totalResults: LParsedata.totalResults,\r\n      });\r\n    });\r\n  };\r\n\r\n  async fetchNewsDataFromServer() {\r\n    let LUrl = `https://newsapi.org/v2/top-headlines?country=${\r\n      this.props.country\r\n    }&category=${this.props.category}&apiKey=3e9e7838c5544ecf80621f19694f5022\r\n    &page=${this.state.page + 1}&pageSize=${this.props.pageSize}`;\r\n\r\n    this.setState({ loading: true });\r\n    let LData = await fetch(LUrl);\r\n    let LParsedata = await LData.json();\r\n    this.setState({ loading: false });\r\n\r\n    return LParsedata;\r\n  }\r\n\r\n  validateArray(p_arrJson) {\r\n    let LResultArray = [];\r\n    for (let itemObject of p_arrJson) {\r\n      if (\r\n        itemObject.title &&\r\n        itemObject.description &&\r\n        itemObject.urlToImage &&\r\n        itemObject.url\r\n      ) {\r\n        LResultArray.push(itemObject);\r\n      }\r\n    }\r\n    return LResultArray;\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"container my-3\">\r\n        <h1 className=\"text-center\">\r\n          News Monkey - Top{\" \"}\r\n          {this.props.category[0].toUpperCase() + this.props.category.slice(1)}{\" \"}\r\n          Headline\r\n        </h1>\r\n        {/* {this.state.loading && <Spinner />} */}\r\n\r\n        <InfiniteScroll\r\n          dataLength={this.state.articles.length}\r\n          next={this.fetchMoreData}\r\n          hasMore={this.state.articles.length<=this.state.totalResults}\r\n          loader={<Spinner />}\r\n        >\r\n          <div className=\"row\">\r\n            {this.state.articles.map((item) => {\r\n              return (\r\n                <div className=\"col-md-4\" key={item.url}>\r\n                  <NewsItem\r\n                    title={item.title ? item.title.slice(0, 40) : \"\"}\r\n                    description={\r\n                      item.description ? item.description.slice(0, 88) : \"\"\r\n                    }\r\n                    imageUrl={item.urlToImage ? item.urlToImage : \"\"}\r\n                    newsUrl={item.url ? item.url : \"\"}\r\n                    publishedAt={item.publishedAt ? item.publishedAt : \"\"}\r\n                    author={item.author ? item.author : \"\"}\r\n                    source={item.source ? item.source : \"\"}\r\n                  />\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n        </InfiniteScroll>\r\n\r\n        <div className=\"container d-flex justify-content-between\">\r\n          <button\r\n            type=\"button\"\r\n            disabled={this.state.page <= 1}\r\n            className=\"btn btn-dark\"\r\n            onClick={this.handleOnPrevious}\r\n          >\r\n            &larr; Previous\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            disabled={this.state.articles.length <= 0}\r\n            className=\"btn btn-dark\"\r\n            onClick={this.handleOnNext}\r\n          >\r\n            Next &rarr;\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default News;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}